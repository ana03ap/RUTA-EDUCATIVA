let datanueva = [
    {
      depa: 'risaralda',
      'Con internetG': 260,
      'Sin internetG': 234,
      'Con internetM': 53,
      'Sin internetM': 47,
      'Con internetN': 50,
      'Sin internetN': 45,
      'Con internetS': 50,
      'Sin internetS': 45,
      'Con internetL': 54,
      'Sin internetL': 49,
      'Con internetI': 54,
      'Sin internetI': 49
    },
    {
      depa: 'norte santander',
      'Con internetG': 268,
      'Sin internetG': 242,
      'Con internetM': 56,
      'Sin internetM': 50,
      'Con internetN': 52,
      'Sin internetN': 47,
      'Con internetS': 51,
      'Sin internetS': 46,
      'Con internetL': 55,
      'Sin internetL': 50,
      'Con internetI': 55,
      'Sin internetI': 50
    },
    {
      depa: 'nariÃ±o',
      'Con internetG': 264,
      'Sin internetG': 238,
      'Con internetM': 54,
      'Sin internetM': 49,
      'Con internetN': 52,
      'Sin internetN': 47,
      'Con internetS': 51,
      'Sin internetS': 45,
      'Con internetL': 54,
      'Sin internetL': 49,
      'Con internetI': 54,
      'Sin internetI': 49
    },
    {
      depa: 'guainia',
      'Con internetG': 252,
      'Sin internetG': 223,
      'Con internetM': 52,
      'Sin internetM': 47,
      'Con internetN': 49,
      'Sin internetN': 43,
      'Con internetS': 48,
      'Sin internetS': 42,
      'Con internetL': 51,
      'Sin internetL': 46,
      'Con internetI': 51,
      'Sin internetI': 46
    },
    {
      depa: 'amazonas',
      'Con internetG': 245,
      'Sin internetG': 225,
      'Con internetM': 51,
      'Sin internetM': 45,
      'Con internetN': 47,
      'Sin internetN': 43,
      'Con internetS': 47,
      'Sin internetS': 43,
      'Con internetL': 51,
      'Sin internetL': 47,
      'Con internetI': 51,
      'Sin internetI': 47
    },
    {
      depa: 'cordoba',
      'Con internetG': 256,
      'Sin internetG': 227,
      'Con internetM': 52,
      'Sin internetM': 46,
      'Con internetN': 50,
      'Sin internetN': 44,
      'Con internetS': 49,
      'Sin internetS': 43,
      'Con internetL': 53,
      'Sin internetL': 48,
      'Con internetI': 53,
      'Sin internetI': 48
    },
    {
      depa: 'choco',
      'Con internetG': 224,
      'Sin internetG': 207,
      'Con internetM': 46,
      'Sin internetM': 42,
      'Con internetN': 43,
      'Sin internetN': 39,
      'Con internetS': 43,
      'Sin internetS': 39,
      'Con internetL': 47,
      'Sin internetL': 44,
      'Con internetI': 47,
      'Sin internetI': 44
    },
    {
      depa: 'caqueta',
      'Con internetG': 247,
      'Sin internetG': 227,
      'Con internetM': 51,
      'Sin internetM': 46,
      'Con internetN': 48,
      'Sin internetN': 44,
      'Con internetS': 48,
      'Sin internetS': 43,
      'Con internetL': 51,
      'Sin internetL': 48,
      'Con internetI': 51,
      'Sin internetI': 48
    },
    {
      depa: 'cauca',
      'Con internetG': 247,
      'Sin internetG': 222,
      'Con internetM': 51,
      'Sin internetM': 45,
      'Con internetN': 48,
      'Sin internetN': 43,
      'Con internetS': 47,
      'Sin internetS': 42,
      'Con internetL': 51,
      'Sin internetL': 46,
      'Con internetI': 51,
      'Sin internetI': 46
    },
    {
      depa: 'vichada',
      'Con internetG': 239,
      'Sin internetG': 230,
      'Con internetM': 50,
      'Sin internetM': 48,
      'Con internetN': 45,
      'Sin internetN': 44,
      'Con internetS': 45,
      'Sin internetS': 43,
      'Con internetL': 51,
      'Sin internetL': 48,
      'Con internetI': 51,
      'Sin internetI': 48
    },
    {
      depa: 'bogota',
      'Con internetG': 272,
      'Sin internetG': 238,
      'Con internetM': 55,
      'Sin internetM': 49,
      'Con internetN': 52,
      'Sin internetN': 45,
      'Con internetS': 53,
      'Sin internetS': 46,
      'Con internetL': 56,
      'Sin internetL': 50,
      'Con internetI': 56,
      'Sin internetI': 50
    },
    {
      depa: 'putumayo',
      'Con internetG': 252,
      'Sin internetG': 229,
      'Con internetM': 52,
      'Sin internetM': 47,
      'Con internetN': 49,
      'Sin internetN': 44,
      'Con internetS': 48,
      'Sin internetS': 43,
      'Con internetL': 52,
      'Sin internetL': 48,
      'Con internetI': 52,
      'Sin internetI': 48
    },
    {
      depa: 'guaviare',
      'Con internetG': 245,
      'Sin internetG': 227,
      'Con internetM': 51,
      'Sin internetM': 48,
      'Con internetN': 47,
      'Sin internetN': 44,
      'Con internetS': 47,
      'Sin internetS': 42,
      'Con internetL': 51,
      'Sin internetL': 47,
      'Con internetI': 51,
      'Sin internetI': 47
    },
    {
      depa: 'caldas',
      'Con internetG': 260,
      'Sin internetG': 231,
      'Con internetM': 53,
      'Sin internetM': 46,
      'Con internetN': 50,
      'Sin internetN': 45,
      'Con internetS': 50,
      'Sin internetS': 44,
      'Con internetL': 54,
      'Sin internetL': 49,
      'Con internetI': 54,
      'Sin internetI': 49
    },
    {
      depa: 'magdalena',
      'Con internetG': 240,
      'Sin internetG': 214,
      'Con internetM': 49,
      'Sin internetM': 43,
      'Con internetN': 46,
      'Sin internetN': 42,
      'Con internetS': 46,
      'Sin internetS': 41,
      'Con internetL': 50,
      'Sin internetL': 45,
      'Con internetI': 50,
      'Sin internetI': 45
    },
    {
      depa: 'la guajira',
      'Con internetG': 242,
      'Sin internetG': 217,
      'Con internetM': 50,
      'Sin internetM': 44,
      'Con internetN': 47,
      'Sin internetN': 42,
      'Con internetS': 46,
      'Sin internetS': 41,
      'Con internetL': 50,
      'Sin internetL': 46,
      'Con internetI': 50,
      'Sin internetI': 46
    },
    {
      depa: 'extranjero',
      'Con internetG': 249,
      'Sin internetG': 235,
      'Con internetM': 53,
      'Sin internetM': 50,
      'Con internetN': 49,
      'Sin internetN': 44,
      'Con internetS': 46,
      'Sin internetS': 45,
      'Con internetL': 50,
      'Sin internetL': 48,
      'Con internetI': 50,
      'Sin internetI': 48
    },
    {
      depa: 'vaupes',
      'Con internetG': 213,
      'Sin internetG': 213,
      'Con internetM': 43,
      'Sin internetM': 43,
      'Con internetN': 41,
      'Sin internetN': 41,
      'Con internetS': 41,
      'Sin internetS': 41,
      'Con internetL': 45,
      'Sin internetL': 44,
      'Con internetI': 45,
      'Sin internetI': 44
    },
    {
      depa: 'arauca',
      'Con internetG': 251,
      'Sin internetG': 234,
      'Con internetM': 52,
      'Sin internetM': 48,
      'Con internetN': 49,
      'Sin internetN': 45,
      'Con internetS': 48,
      'Sin internetS': 44,
      'Con internetL': 52,
      'Sin internetL': 49,
      'Con internetI': 52,
      'Sin internetI': 49
    },
    {
      depa: 'huila',
      'Con internetG': 260,
      'Sin internetG': 241,
      'Con internetM': 54,
      'Sin internetM': 50,
      'Con internetN': 51,
      'Sin internetN': 47,
      'Con internetS': 50,
      'Sin internetS': 46,
      'Con internetL': 54,
      'Sin internetL': 50,
      'Con internetI': 54,
      'Sin internetI': 50
    },
    {
      depa: 'bolivar',
      'Con internetG': 248,
      'Sin internetG': 214,
      'Con internetM': 50,
      'Sin internetM': 43,
      'Con internetN': 48,
      'Sin internetN': 41,
      'Con internetS': 47,
      'Sin internetS': 40,
      'Con internetL': 52,
      'Sin internetL': 45,
      'Con internetI': 52,
      'Sin internetI': 45
    },
    {
      depa: 'valle',
      'Con internetG': 252,
      'Sin internetG': 228,
      'Con internetM': 51,
      'Sin internetM': 46,
      'Con internetN': 48,
      'Sin internetN': 44,
      'Con internetS': 49,
      'Sin internetS': 44,
      'Con internetL': 53,
      'Sin internetL': 48,
      'Con internetI': 53,
      'Sin internetI': 48
    },
    {
      depa: 'cesar',
      'Con internetG': 253,
      'Sin internetG': 229,
      'Con internetM': 52,
      'Sin internetM': 47,
      'Con internetN': 49,
      'Sin internetN': 44,
      'Con internetS': 48,
      'Sin internetS': 43,
      'Con internetL': 52,
      'Sin internetL': 48,
      'Con internetI': 52,
      'Sin internetI': 48
    },
    {
      depa: 'sucre',
      'Con internetG': 257,
      'Sin internetG': 225,
      'Con internetM': 53,
      'Sin internetM': 45,
      'Con internetN': 50,
      'Sin internetN': 44,
      'Con internetS': 49,
      'Sin internetS': 42,
      'Con internetL': 53,
      'Sin internetL': 47,
      'Con internetI': 53,
      'Sin internetI': 47
    },
    {
      depa: 'tolima',
      'Con internetG': 253,
      'Sin internetG': 227,
      'Con internetM': 51,
      'Sin internetM': 46,
      'Con internetN': 49,
      'Sin internetN': 44,
      'Con internetS': 49,
      'Sin internetS': 43,
      'Con internetL': 53,
      'Sin internetL': 48,
      'Con internetI': 53,
      'Sin internetI': 48
    },
    {
      depa: 'quindio',
      'Con internetG': 260,
      'Sin internetG': 233,
      'Con internetM': 53,
      'Sin internetM': 47,
      'Con internetN': 50,
      'Sin internetN': 45,
      'Con internetS': 50,
      'Sin internetS': 45,
      'Con internetL': 54,
      'Sin internetL': 49,
      'Con internetI': 54,
      'Sin internetI': 49
    },
    {
      depa: 'casanare',
      'Con internetG': 256,
      'Sin internetG': 237,
      'Con internetM': 53,
      'Sin internetM': 49,
      'Con internetN': 49,
      'Sin internetN': 46,
      'Con internetS': 49,
      'Sin internetS': 45,
      'Con internetL': 53,
      'Sin internetL': 49,
      'Con internetI': 53,
      'Sin internetI': 49
    },
    {
      depa: 'atlantico',
      'Con internetG': 258,
      'Sin internetG': 225,
      'Con internetM': 53,
      'Sin internetM': 46,
      'Con internetN': 49,
      'Sin internetN': 43,
      'Con internetS': 50,
      'Sin internetS': 43,
      'Con internetL': 54,
      'Sin internetL': 47,
      'Con internetI': 54,
      'Sin internetI': 47
    },
    {
      depa: 'santander',
      'Con internetG': 274,
      'Sin internetG': 248,
      'Con internetM': 57,
      'Sin internetM': 51,
      'Con internetN': 53,
      'Sin internetN': 48,
      'Con internetS': 53,
      'Sin internetS': 47,
      'Con internetL': 56,
      'Sin internetL': 51,
      'Con internetI': 56,
      'Sin internetI': 51
    },
    {
      depa: 'cundinamarca',
      'Con internetG': 262,
      'Sin internetG': 240,
      'Con internetM': 54,
      'Sin internetM': 49,
      'Con internetN': 50,
      'Sin internetN': 46,
      'Con internetS': 51,
      'Sin internetS': 46,
      'Con internetL': 54,
      'Sin internetL': 50,
      'Con internetI': 54,
      'Sin internetI': 50
    },
    {
      depa: 'meta',
      'Con internetG': 257,
      'Sin internetG': 235,
      'Con internetM': 53,
      'Sin internetM': 49,
      'Con internetN': 50,
      'Sin internetN': 45,
      'Con internetS': 49,
      'Sin internetS': 44,
      'Con internetL': 53,
      'Sin internetL': 49,
      'Con internetI': 53,
      'Sin internetI': 49
    },
    {
      depa: 'boyaca',
      'Con internetG': 272,
      'Sin internetG': 244,
      'Con internetM': 56,
      'Sin internetM': 50,
      'Con internetN': 53,
      'Sin internetN': 48,
      'Con internetS': 53,
      'Sin internetS': 47,
      'Con internetL': 55,
      'Sin internetL': 50,
      'Con internetI': 55,
      'Sin internetI': 50
    },
    {
      depa: 'antioquia',
      'Con internetG': 254,
      'Sin internetG': 222,
      'Con internetM': 51,
      'Sin internetM': 45,
      'Con internetN': 48,
      'Sin internetN': 42,
      'Con internetS': 50,
      'Sin internetS': 43,
      'Con internetL': 53,
      'Sin internetL': 47,
      'Con internetI': 53,
      'Sin internetI': 47
    },
    {
      depa: 'san andres',
      'Con internetG': 247,
      'Sin internetG': 226,
      'Con internetM': 49,
      'Sin internetM': 44,
      'Con internetN': 46,
      'Sin internetN': 43,
      'Con internetS': 47,
      'Sin internetS': 43,
      'Con internetL': 52,
      'Sin internetL': 48,
      'Con internetI': 52,
      'Sin internetI': 48
    }
  ]
  
  
  const dataGlobal = datanueva.map(item => {
    return {
      depa: item.depa,
      'Con internet': item['Con internetG'],
      'Sin internet': item['Sin internetG']
    };
  });
  console.log(dataGlobal)
  const dataMate = datanueva.map(item => {
    return {
      depa: item.depa,
      'Con internet': item['Con internetM'],
      'Sin internet': item['Sin internetM']
    };
  });
  
  const dataLectura= datanueva.map(item => {
    return {
      depa: item.depa,
      'Con internet': item['Con internetL'],
      'Sin internet': item['Sin internetL']
    };
  });
  
  const dataNaturales = datanueva.map(item => {
    return {
      depa: item.depa,
      'Con internet': item['Con internetN'],
      'Sin internet': item['Sin internetN']
    };
  });
  
  const dataSociales = datanueva.map(item => {
    return {
      depa: item.depa,
      'Con internet': item['Con internetS'],
      'Sin internet': item['Sin internetS']
    };
  });
  
  const dataIngles = datanueva.map(item => {
    return {
      depa: item.depa,
      'Con internet': item['Con internetI'],
      'Sin internet': item['Sin internetI']
    };
  });
  
    svgWidth = 700;
   svgHeight = 700;
   margin = { top: 20, right: 40, bottom: 80, left: 60 };
   width = svgWidth - margin.left - margin.right;
   height = svgHeight - margin.top - margin.bottom;
  
   svg = d3.select("#chart-internet").append("svg")
    .attr("width", svgWidth)
    .attr("height", svgHeight);
  
  const materiaSelector = document.getElementById("materiaSelector");
  
  
  
  function updateChart(selectedData) {
    const xScale = d3.scaleBand()
      .domain(selectedData.map(d => d.depa))
      .range([0, width])
      .padding(0.1);
  
    const yScale = d3.scaleLinear()
      .domain([0, d3.max(selectedData, d => Math.max(d['Con internet'], d['Sin internet']))])
      .nice()
      .range([height, 0]);
  
    svg.selectAll("*").remove();
  
    const g = svg.append("g")
      .attr("transform", `translate(${margin.left},${margin.top})`);
  
    g.selectAll(".bar-con-internet")
      .data(selectedData)
      .enter().append("rect")
      .attr("class", "bar-con-internet")
      .attr("x", d => xScale(d.depa))
      .attr("y", d => yScale(d['Con internet']))
      .attr("width", xScale.bandwidth() / 2)
      .attr("height", d => height - yScale(d['Con internet']))
      .attr("fill", "#D6f888");
  
    g.selectAll(".bar-sin-internet")
      .data(selectedData)
      .enter().append("rect")
      .attr("class", "bar-sin-internet")
      .attr("x", d => xScale(d.depa) + xScale.bandwidth() / 2)
      .attr("y", d => yScale(d['Sin internet']))
      .attr("width", xScale.bandwidth() / 2)
      .attr("height", d => height - yScale(d['Sin internet']))
      .attr("fill", "#74698c");
  
    g.append("g")
      .attr("class", "x-axis")
      .attr("transform", `translate(0,${height})`)
      .call(d3.axisBottom(xScale))
      .selectAll("text")
      .attr("transform", "rotate(-45)")
      .attr("text-anchor", "end");
  
    g.append("g")
      .attr("class", "y-axis")
      .call(d3.axisLeft(yScale));
  
    g.append("text")
      .attr("transform", "rotate(-90)")
      .attr("x", -height / 2)
      .attr("y", -margin.left + 20)
      .attr("text-anchor", "middle")
      .style("font-size", "20px")
      .text("Promedio");
  
    const legend = svg.append("g")
      .attr("class", "legend")
      .attr("transform", `translate(${width + margin.right},${margin.top})`);
  
    legend.append("rect")
      .attr("x", 0)
      .attr("y", 0)
      .attr("width", 20)
      .attr("height", 20)
      .attr("fill", "#D6f888");
  
    legend.append("text")
      .attr("x", 30)
      .attr("y", 10)
      .text("Con");
  
    legend.append("rect")
      .attr("x", 0)
      .attr("y", 30)
      .attr("width", 20)
      .attr("height", 20)
      .attr("fill", "#74698c");
  
    legend.append("text")
      .attr("x", 30)
      .attr("y", 40)
      .text("Sin");

      
      g.selectAll('.tick text')
      .style('font-family', 'Comfortaa, sans-serif');

    g.selectAll('text')
      .style('font-family', 'Comfortaa, sans-serif');
  }
  
  // Inicializa el gráfico con la opción predeterminada
  
  updateChart(dataGlobal);
  materiaSelector.addEventListener("change", () => {
    const selectedOption = materiaSelector.value;
     let selectedData;
  
    switch (selectedOption) {
      case "dataGlobal":
        selectedData = dataGlobal;
        break;
      case "dataMate":
        selectedData = dataMate;
        break;
      case "dataLectura":
        selectedData = dataLectura;
        break;
      case "dataNaturales":
        selectedData = dataNaturales;
        break;
      case "dataSociales":
        selectedData = dataSociales;
        break;
      case "dataIngles":
        selectedData = dataIngles;
        break;
      default:
        selectedData = dataGlobal;
        break;
    }
  
    updateChart(selectedData);
  });
  
  